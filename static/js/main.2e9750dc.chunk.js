(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{201:function(e,t,n){e.exports={form:"LoginForm_form__cziyu"}},385:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(28),u=n(107),o=n(92),i=n(100),j=n(195),l=n(24);!function(e){e.SET_AUTH="SET_AUTH",e.SET_IS_LOADING="SET_IS_LOADING",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER"}(r||(r={}));var b,O={isAuth:!1,user:{},isLoading:!1,error:""};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS"}(b||(b={}));var d={guests:[],events:[]};var f,h={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(l.a)(Object(l.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SET_ERROR:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload,isLoading:!1});case r.SET_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{isLoading:t.payload});case r.SET_USER:return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SET_GUESTS:return Object(l.a)(Object(l.a)({},e),{},{guests:t.payload});case b.SET_EVENTS:return Object(l.a)(Object(l.a)({},e),{},{events:t.payload});default:return e}}},p=Object(i.c)(h),m=Object(i.d)(p,Object(i.a)(j.a)),x=n(389),E=n(134),v=n(25),S=o.c,g=n(135),y=n(101),T=n(61),I=n(394),_=n(396),w=n(395),N=function(e){var t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0");return"".concat(t,".").concat(n,".").concat(r)},L=n(7),U=function(e){return Object(L.jsx)(w.a,{dateCellRender:function(t){var n=N(t.toDate()),r=e.events.filter((function(e){return e.date===n}));return Object(L.jsx)("div",{className:"events",children:r.map((function(e,t){return Object(L.jsx)("div",{children:Object(L.jsx)(_.a,{status:"success",text:e.description})},t)}))})}})},A=n(159),G=n(391),R=n(393),k=n(392),C=n(58),D=n.n(C),V=function(e){return{required:!0,message:e}},F=function(e){return function(){return{validator:function(t,n){return n.isSameOrAfter(D()())?Promise.resolve():Promise.reject(new Error(e))}}}},H=A.a.Option,J=function(e){var t=Object(a.useState)({author:"",description:"",date:"",guest:""}),n=Object(g.a)(t,2),r=n[0],c=n[1],s=S((function(e){return e.auth})).user;return Object(L.jsxs)(G.a,{onFinish:function(){e.submit(Object(l.a)(Object(l.a)({},r),{},{author:s.username}))},children:[Object(L.jsx)(G.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f",name:"description",rules:[V("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f!")],children:Object(L.jsx)(R.a,{value:r.description,onChange:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{description:e.target.value}))}})}),Object(L.jsx)(G.a.Item,{label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f",name:"date",rules:[V("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0441\u043e\u0431\u044b\u0442\u0438\u044f!"),F("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430")],children:Object(L.jsx)(k.a,{style:{width:"100%"},onChange:function(e){e&&c(Object(l.a)(Object(l.a)({},r),{},{date:N(e.toDate())}))}})}),Object(L.jsx)(G.a.Item,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0441\u0442\u044f",name:"user",rules:[V("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0433\u043e\u0441\u0442\u044f!")],children:Object(L.jsx)(A.a,{onChange:function(e){return c(Object(l.a)(Object(l.a)({},r),{},{guest:e}))},children:e.guests.map((function(e,t){return Object(L.jsx)(H,{value:e.username,children:e.username},t)}))})}),Object(L.jsx)(y.a,{justify:"end",children:Object(L.jsx)(G.a.Item,{children:Object(L.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})})]})},P=n(37),z=n.n(P),M=n(63),q=n(131),B=n.n(q),Y={setUser:function(e){return{type:r.SET_USER,payload:e}},setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},login:function(e,t){return function(){var n=Object(M.a)(z.a.mark((function n(r){return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(Y.setIsLoading(!0)),setTimeout(Object(M.a)(z.a.mark((function n(){var a,c;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B.a.get("../users.json");case 2:a=n.sent,(c=a.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",c.username),r(Y.setUser(c)),r(Y.setIsAuth(!0))):r(Y.setError("Not found user"));case 5:case"end":return n.stop()}}),n)}))),1e3)}catch(a){r(Y.setError("Error auth"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(e){try{e(Y.setIsAuth(!1)),e(Y.setUser({})),e(Y.setError("")),localStorage.removeItem("auth"),localStorage.removeItem("username")}catch(t){e(Y.setError("Error logout"))}}}},K=n(199),Q=n(200),W=function(){function e(){Object(K.a)(this,e)}return Object(Q.a)(e,null,[{key:"getUsers",value:function(){var e=Object(M.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.a.get("./users.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),X={setGuests:function(e){return{type:b.SET_GUESTS,payload:e}},setEvents:function(e){return{type:b.SET_EVENTS,payload:e}},fetchGuests:function(){return function(){var e=Object(M.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getUsers();case 3:n=e.sent,t(X.setGuests(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(M.a)(z.a.mark((function t(n){var r,a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),console.log(typeof a),a.push(e),n(X.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvents:function(e){return function(){var t=Object(M.a)(z.a.mark((function t(n){var r,a,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(X.setEvents(c))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Z=Object(l.a)(Object(l.a)({},Y),X),$=function(){var e=Object(o.b)();return Object(i.b)(Z,e)},ee=function(){var e=Object(a.useState)(!1),t=Object(g.a)(e,2),n=t[0],r=t[1],c=function(){return r(!1)},s=$(),u=s.fetchGuests,o=s.createEvent,i=s.fetchEvents,j=S((function(e){return e.event})),l=j.guests,b=j.events,O=S((function(e){return e.auth})).user;Object(a.useEffect)((function(){u(),i(O.username)}),[]);return Object(L.jsxs)(x.a,{children:[Object(L.jsx)(y.a,{justify:"center",align:"middle",className:"height-100",children:Object(L.jsx)(U,{events:b})}),Object(L.jsx)(y.a,{justify:"center",children:Object(L.jsx)(T.a,{onClick:function(){return r(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"})}),Object(L.jsx)(I.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435",visible:n,onCancel:c,footer:"",children:Object(L.jsx)(J,{guests:l,submit:function(e){o(e),c()}})})]})},te=n(390),ne=n(398),re=n(201),ae=n.n(re),ce=function(){var e=S((function(e){return e.auth})),t=e.isLoading,n=e.error,r=$().login;return Object(L.jsxs)(G.a,{name:"basic",labelCol:{span:11},wrapperCol:{span:13},className:ae.a.form,onFinish:function(e){var t=e.username,n=e.password;r(t,n)},children:[n&&Object(L.jsx)(ne.a,{message:n,type:"error"}),Object(L.jsx)(G.a.Item,{label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"username",rules:[V("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!")],children:Object(L.jsx)(R.a,{})}),Object(L.jsx)(G.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[V("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!")],children:Object(L.jsx)(R.a.Password,{})}),Object(L.jsx)(G.a.Item,{wrapperCol:{offset:8,span:16},children:Object(L.jsx)(T.a,{type:"primary",htmlType:"submit",loading:t,children:"Submit"})})]})},se=function(e){return Object(L.jsx)(x.a,{children:Object(L.jsx)(y.a,{justify:"center",align:"middle",className:"height-100",children:Object(L.jsx)(te.a,{children:Object(L.jsx)(ce,{})})})})};!function(e){e.LOGIN="/login",e.EVENTS="/"}(f||(f={}));var ue=[{path:f.LOGIN,component:se,exact:!0}],oe=[{path:f.EVENTS,component:ee,exact:!0}],ie=function(e){return S((function(e){return e.auth.isAuth}))?Object(L.jsxs)(v.d,{children:[oe.map((function(e){return Object(L.jsx)(v.b,Object(l.a)({},e),e.path)})),Object(L.jsx)(v.a,{to:f.EVENTS})]}):Object(L.jsxs)(v.d,{children:[ue.map((function(e){return Object(L.jsx)(v.b,Object(l.a)({},e),e.path)})),Object(L.jsx)(v.a,{to:f.LOGIN})]})},je=n(397),le=function(){var e=S((function(e){return e.auth})),t=e.isAuth,n=e.user,r=$().logout;return Object(L.jsx)(E.Header,{children:Object(L.jsx)(je.a,{theme:"dark",selectable:!1,mode:"horizontal",style:{justifyContent:"end"},children:t?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(je.a.Item,{children:[" ",Object(L.jsx)("div",{children:n.username})]},"1"),Object(L.jsx)(je.a.Item,{onClick:r,children:Object(L.jsx)(u.b,{to:f.LOGIN,children:"\u0412\u044b\u0439\u0442\u0438"})},"2")]}):Object(L.jsx)(je.a.Item,{children:Object(L.jsx)(u.b,{to:f.LOGIN,children:"Login"})},"1")})})},be=function(){var e=$(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){localStorage.getItem("auth")?(n(!0),t({username:localStorage.getItem("username")})):(n(!1),t({}))}),[]),Object(L.jsxs)(x.a,{children:[Object(L.jsx)(le,{}),Object(L.jsx)(E.Content,{children:Object(L.jsx)(ie,{})})]})};n(384),n(385);Object(s.render)(Object(L.jsx)(o.a,{store:m,children:Object(L.jsx)(u.a,{children:Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(be,{})})})}),document.getElementById("root"))}},[[386,1,2]]]);
//# sourceMappingURL=main.2e9750dc.chunk.js.map